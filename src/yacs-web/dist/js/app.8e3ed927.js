(function(e){function t(t){for(var r,o,i=t[0],c=t[1],u=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&f.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},s={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2c20":function(e,t,n){},"35c7":function(e,t,n){"use strict";var r=n("2c20"),s=n.n(r);s.a},"3c13":function(e,t,n){"use strict";var r=n("8146"),s=n.n(r);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("0cdd");var r=n("2b0e"),s=n("5f5b"),a=n("51c2");n("ab8b"),n("2dd8");r["default"].use(s["a"]),r["default"].use(a["a"]);var o=n("ecee"),i=n("c074"),c=n("ad3d");o["c"].add(i["a"]),r["default"].component("font-awesome-icon",c["a"]);var u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("router-view")],1)},l=[],d={name:"App"},f=d,h=(n("5c0b"),n("2877")),m=Object(h["a"])(f,u,l,!1,null,null,null),_=m.exports,v=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("h1",[e._v("Admin Panel")]),n("hr"),n("section",{attrs:{id:"import-data"}},[n("h2",[e._v("Import Data")]),n("div",{staticClass:"well well-sm"},[e._v(" Input course data as CSV, for more info, see: "),n("a",{attrs:{href:"#"}},[e._v("http://help.com")]),e._v(" (show github link for more docs later) ")]),n("form",{staticClass:"form-group",on:{submit:e.onSubmit}},[n("input",{staticClass:"form-control-file",attrs:{type:"file",name:"file"}}),e._v(" "),n("br"),n("input",{staticClass:"btn btn-success btn-sm",attrs:{type:"Submit",value:"Submit"}})])]),n("a",{staticClass:"btn btn-info text-white",on:{click:e.back}},[e._v("Back")]),n("b-spinner",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),n("hr")],1)},b=[],y=(n("99af"),n("b0c0"),n("bc3a")),g=n.n(y),S=g.a.create({baseURL:"http://localhost:5000/api"}),C=function(e){return S.post("/bulkCourseUpload",e)},O={name:"AdminPage",components:{},data:function(){return{loading:!1}},methods:{onSubmit:function(e){var t=this;e.preventDefault();var n=new FormData(e.target);if(this.loading=!0,n.get("file")&&n.get("file").name){var r=n.get("file").name;C(n).then((function(e){t.$bvToast.toast("".concat(r," has been successfully uploaded!"),{title:"Upload Result",variant:"info",noAutoHide:!1}),t.loading=!1})).catch((function(e){t.loading=!1,t.$bvToast.toast("HTTP ".concat(e.response.status,": ").concat(e.response.data),{title:"Upload Result",variant:"danger",noAutoHide:!0})}))}else this.$bvToast.toast("Must upload a CSV file",{title:"Validation Error",variant:"danger",noAutoHide:!1}),this.loading=!1},back:function(){window.history.back()}},created:function(){}},w=O,x=Object(h["a"])(w,p,b,!1,null,null,null),k=x.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"pt-3",attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{md:"4"}},[n("h3",[e._v("YACS")]),n("hr"),n("div",{staticClass:"course-search"},[n("b-form-group",{attrs:{label:"Search","label-for":"search"}},[n("b-form-input",{attrs:{id:"search",trim:"",placeholder:"Intro to College - COLG 1030 - 5/2"},model:{value:e.textSearch,callback:function(t){e.textSearch=t},expression:"textSearch"}})],1),n("b-form-group",{attrs:{label:"Filter Sub-Semester",for:"sub-semester"}},[n("b-form-select",{attrs:{options:e.subsemesterOptions},model:{value:e.selectedSubsemester,callback:function(t){e.selectedSubsemester=t},expression:"selectedSubsemester"}})],1),n("b-form-group",{attrs:{label:"Filter Department",for:"department"}},[n("b-form-select",{attrs:{options:e.departmentOptions},model:{value:e.selectedDepartment,callback:function(t){e.selectedDepartment=t},expression:"selectedDepartment"}})],1)],1),n("hr"),n("b-list-group",{staticClass:"course-list",attrs:{flush:""}},e._l(e.filteredCourses,(function(t){return n("b-list-group-item",{key:t.name+t.date_end+t.date_start,class:{"bg-light":t.selected},attrs:{disabled:t.selected},on:{click:function(n){return e.addCourse(t)}}},[n("b",[e._v(e._s(t.name))]),e._v(" ("+e._s(e.readableDate(t.date_start))+" - "+e._s(e.readableDate(t.date_end))+") "),n("br"),e._v(" "+e._s(t.title)+" ")])})),1)],1),n("b-col",{attrs:{md:"8"}},[n("Schedule",{attrs:{courses:e.selectedCourses,courseIdentifierFunc:e._getCourseIdentifier},on:{unselectCourse:e.removeCourse}})],1)],1)],1)},T=[],E=(n("4de4"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("2532"),n("159b"),n("2909")),A=g.a.create({baseURL:"http://localhost:5000/api"}),M=function(){return A.get("/class")},j=function(){return A.get("/department")},H=function(){return A.get("/subsemester")},R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("button",{staticClass:"btn btn-success ml-auto mb-2 d-block",on:{click:e.exportScheduleToIcs}},[n("font-awesome-icon",{attrs:{icon:e.exportIcon}}),e._v(" Export to ICS ")],1)]),n("b-col",{attrs:{cols:"12"}},[n("div",{staticClass:"schedule",style:{height:e.totalHeight+"px"}},[n("div",{staticClass:"schedule-legend"},e._l(e.hours,(function(t,r){return n("div",{key:t,staticClass:"hour-label",style:{height:e.hourHeight+"%"}},[0!=r?n("div",[e._v(e._s(t))]):e._e()])})),0),n("div",{staticClass:"schedule-grid"},e._l(e.days,(function(t,r){return n("div",{key:t.longname,staticClass:"grid-day",style:{width:e.dayWidth+"%"}},[n("div",{staticClass:"day-label"},[e._v(e._s(t.longname))]),e._l(e.courseSessionsOnDay(r),(function(t){return n("ScheduleEvent",{key:t.crn+t.day_of_week+t.time_start,staticClass:"schedule-event",style:{"margin-top":e.eventPosition(t)+"px",height:e.eventHeight(t)+"px",backgroundColor:e.getBackgroundColor(t),borderColor:e.getBorderColor(t),color:e.getTextColor(t),width:e.dayWidth+"%"},attrs:{crn:t.crn,section:t.section,semester:t.semester}})})),e._l(e.hours,(function(t){return n("div",{key:t,staticClass:"grid-hour",style:{height:e.hourHeight+"%"}})}))],2)})),0)])]),n("b-col",[n("h5",[e._v("Selected Courses:")])]),n("b-col",{attrs:{cols:"12"}},[n("b-card-group",{attrs:{"no-body":"",columns:""}},e._l(e.courses,(function(t){return n("b-card",{key:t.name,staticClass:"selected-course-card",attrs:{title:t.name,"sub-title":t.title}},[n("button",{staticClass:"close text-muted",attrs:{type:"button"},on:{click:function(n){return e.removeCourse(t)}}},[n("span",[e._v("Ã—")])]),n("b-list-group",{attrs:{flush:""}},e._l(t.sections,(function(r){return n("b-list-group-item",{key:r.crn,style:{"border-left":r.selected?"4px solid "+e.getBorderColor(r):"none","background-color":r.selected?""+e.getBackgroundColor(r):"white"},attrs:{button:""},on:{click:function(n){return n.stopPropagation(),e.toggleCourseSection(t,r)}}},[e._v(" "+e._s(r.crn)+" - "+e._s(r.sessions[0].section)),n("br"),e._l(r.sessions,(function(t){return n("span",{key:t.crn+t.day_of_week+t.time_start},[e._v(" "+e._s(e.DAY_SHORTNAMES[t.day_of_week+1])+": "+e._s(e.readableTime(t.time_start))+" - "+e._s(e.readableTime(t.time_end))+" "),n("br")])}))],2)})),1)],1)})),1)],1)],1)},I=[],L=(n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("ddb0"),n("c1df")),U=n.n(L),N=(n("a434"),n("d4ec")),P=n("bee2"),$=n("ade3"),Y=function(){function e(t){Object(N["a"])(this,e),Object($["a"])(this,"dailySessions",void 0),this.dailySessions=[],this._getCourseIdentifier=t;for(var n=0;n<e.SCHEDULE_DAYS.length;n++)this.dailySessions.push([])}return Object(P["a"])(e,[{key:"_getAddCourseSessionIndex",value:function(e){if(e){if(void 0!==e.day_of_week&&void 0!==e.time_end&&void 0!==e.time_start){var t=this.dailySessions[e.day_of_week],n=t.length;if(0===n)return 0;if(e.time_start>=t[n-1].time_end&&e.time_end>t[n-1].time_end)return n;for(var r=0;r<t.length;r++){var s=t[r];if(e.time_end<=s.time_start&&e.time_start<s.time_start)return r;if(!(e.time_start>=s.time_end&&e.time_end>s.time_end))throw{type:"Schedule Conflict",existingSession:s,addingSession:e}}return}}else;}},{key:"_removeCourseSession",value:function(e){if(e){var t=0,n=!0,r=!1,s=void 0;try{for(var a,o=this.dailySessions[e.day_of_week][Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var i=a.value;if(i.section===e.section&&i.time_start===e.time_start&&i.time_end===e.time_end&&i.day_of_week===e.day_of_week)return this.dailySessions[e.day_of_week].splice(t,1),!0;t+=1}}catch(c){r=!0,s=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return!1}}},{key:"addCourseSection",value:function(e,t){if(t){if(0!==t.sessions.length){var n=[],r=!0,s=!1,a=void 0;try{for(var o,i=t.sessions[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var c=o.value,u=this._getAddCourseSessionIndex(c);if(null===u)return!1;n.push({index:u,day:c.day_of_week,courseSession:c})}}catch(v){s=!0,a=v}finally{try{r||null==i.return||i.return()}finally{if(s)throw a}}n.sort((function(e,t){return e.day===t.day?e.day-t.day:t.courseSession.time_start-e.courseSession.time_start}));for(var l=0,d=n;l<d.length;l++){var f=d[l],h=f.index,m=f.day,_=f.courseSession;this.dailySessions[m].splice(h,0,_),_._courseKey=this._getCourseIdentifier(e)}return t.selected=!0,!0}}else;}},{key:"removeCourseSection",value:function(e){if(e)if(0===e.sessions.length);else{var t=!0,n=!1,r=void 0;try{for(var s,a=e.sessions[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var o=s.value;this._removeCourseSession(o)}}catch(i){n=!0,r=i}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}e.selected=!1}else;}},{key:"removeCourse",value:function(e){if(e)if(0===e.sections.length);else{var t=!0,n=!1,r=void 0;try{for(var s,a=e.sections[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var o=s.value;this.removeCourseSection(o)}}catch(i){n=!0,r=i}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}else;}},{key:"getCourseBySubclass",value:function(e){return this.courses[this._getCourseIdentifier(e)]}}]),e}();Object($["a"])(Y,"SCHEDULE_DAYS",["Mo","Tu","We","Th","Fr"]),Object($["a"])(Y,"SCHEDULE_HOURS",[8,9,10,11,12,13,14,15,16,17,18,19,20]),Object($["a"])(Y,"SCHEDULE_DAY_DURATION",Y.SCHEDULE_HOURS[Y.SCHEDULE_HOURS.length-1]-Y.SCHEDULE_HOURS[0]);n("4ec9");var F=function(){function e(){Object(N["a"])(this,e),Object($["a"])(this,"assignmentIncr",0),Object($["a"])(this,"colorAssignments",new Map)}return Object(P["a"])(e,[{key:"getColor",value:function(t){var n=this.assign(t);return{primary:e.COLORS[n],text:e.TEXT_COLORS[n],border:e.BORDER_COLORS[n]}}},{key:"assign",value:function(e){return this.colorAssignments.has(e)?this.colorAssignments.get(e):this.colorAssignments.set(e,this.nextAssignment()).get(e)}},{key:"nextAssignment",value:function(){return++this.assignmentIncr%e.NUM_COLORS}}]),e}();Object($["a"])(F,"COLORS",["#ffd4df","#ceeffc","#fff4d0","#dcf7da","#f7e2f7","#ede6df","#ffe9cf"]),Object($["a"])(F,"TEXT_COLORS",["#d1265d","#1577aa","#bf8a2e","#008a2e","#853d80","#9d5733","#d9652b"]),Object($["a"])(F,"BORDER_COLORS",["#ff2066","#00aff2","#ffcb45","#48da58","#d373da","#a48363","#ff9332"]),Object($["a"])(F,"NUM_COLORS",7);var B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"schedule-event"},[n("div",{staticClass:"event-text"},[e._v(" "+e._s(e.crn)+" - "),e._v(" "+e._s(e.section)),n("br")])])},W=[],G={name:"ScheduleEvent",props:{crn:String,semester:String,section:String}},K=G,V=(n("9481"),Object(h["a"])(K,B,W,!1,null,"267b83f2",null)),J=V.exports,X={name:"Schedule",components:{ScheduleEvent:J},props:{courses:Object,courseIdentifierFunc:Function},data:function(){return{startDay:1,endDay:5,startTime:480,endTime:1320,totalHeight:600,exportIcon:i["a"],DAY_SHORTNAMES:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DAY_LONGNAMES:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ICS_DAY_SHORTNAMES:["MO","TU","WE","TH","FR","SA","SU"],colorService:new F,schedule:new Y(this.courseIdentifierFunc)}},methods:{hourName:function(e){var t=e/60;return 0===t?"12 AM":t<12?t+" AM":12===t?"Noon":t-12+" PM"},toMinutes:function(e){var t=U()(e,"kk:mm:ss");return 60*t.hours()+t.minutes()},eventHeight:function(e){var t=this.toMinutes(e.time_end)-this.toMinutes(e.time_start);return this.totalHeight*(t/this.numMinutes)},eventPosition:function(e){var t=this.toMinutes(e.time_start);return this.totalHeight*((t-this.startTime)/this.numMinutes)},getBackgroundColor:function(e){return this.colorService.getColor(e.crn).primary},getBorderColor:function(e){return this.colorService.getColor(e.crn).border},getTextColor:function(e){return this.colorService.getColor(e.crn).text},readableTime:function(e){return U()(e,"kk:mm:ss").format("h:mma")},courseSessionsOnDay:function(e){return this.schedule.dailySessions[e]},exportScheduleToIcs:function(){var e,t=window.ics(),n=!0,r=!1,s=void 0;try{for(var a,o=this.schedule.dailySessions[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var i=a.value,c=!0,u=!1,l=void 0;try{for(var d,f=i[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value,m=this.courses[h._courseKey];e=h.semester,t.addEvent("Class: ".concat(m.title),"LEC day",h.location,new Date("".concat(m.date_start.toDateString()," ").concat(h.time_start)),new Date("".concat(m.date_start.toDateString()," ").concat(h.time_end)),{freq:"WEEKLY",interval:1,until:m.date_end,byday:[this.ICS_DAY_SHORTNAMES[h.day_of_week]]})}}catch(_){u=!0,l=_}finally{try{c||null==f.return||f.return()}finally{if(u)throw l}}}}catch(_){r=!0,s=_}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}t.download("".concat(e.replace(/^(\w)(\w*?)\s?(\d+)/,(function(e,t,n,r){return t.toUpperCase()+n.toLowerCase()+r})),"_Schedule"))},removeCourse:function(e){this.schedule.removeCourse(e),this.$emit("unselectCourse",e)},toggleCourseSection:function(e,t){if(t.selected)this.schedule.removeCourseSection(t);else try{this.schedule.removeCourse(e),this.schedule.addCourseSection(e,t)}catch(r){if("Schedule Conflict"===r.type){var n=this.$createElement("p",{class:["mb-0"]},["Conflict with ".concat(r.existingSession.crn," - ").concat(r.existingSession.section," "),this.$createElement("div",{style:"\n                                            background-color:".concat(this.getBackgroundColor(r.existingSession),";\n                                            border:1px solid ").concat(this.getBorderColor(r.existingSession),";\n                                            width:13px;\n                                            height:13px;\n                                            display:inline-block;")})]);this.$bvToast.toast(n,{title:"Cannot add ".concat(e.title),variant:"danger",noAutoHide:!0})}}}},computed:{numDays:function(){return this.endDay-this.startDay+1},numMinutes:function(){return this.endTime-this.startTime},hours:function(){for(var e=[],t=this.startTime;t<this.endTime;t+=60)e.push(this.hourName(t));return e},days:function(){for(var e=[],t=this.startDay;t<=this.endDay;++t)e.push({longname:this.DAY_LONGNAMES[t],shortname:this.DAY_SHORTNAMES[t]});return e},dayWidth:function(){return 100/this.numDays-1},hourHeight:function(){return 6e3/this.numMinutes}}},q=X,z=(n("3c13"),Object(h["a"])(q,R,I,!1,null,"76967817",null)),Q=z.exports,Z={name:"MainPage",components:{Schedule:Q},data:function(){return{textSearch:null,selectedSubsemester:null,subsemesterOptions:[{text:"All",value:null}],selectedDepartment:null,departmentOptions:[{text:"All",value:null}],courses:[],selectedCourses:{}}},created:function(){var e=this;M().then((function(t){var n=t.data;e.courses=n.map((function(t){return t.date_start=new Date(t.date_start),t.date_end=new Date(t.date_end),t.str=[t.title,t.name,e.readableDate(t.date_start),e.readableDate(t.date_end)].join(),t.sections=t.sections.filter((function(e){return!!e})),t.sections.forEach((function(e){e&&(e.selected=!1)})),t.selected=!1,t}))})),j().then((function(t){var n,r=t.data;(n=e.departmentOptions).push.apply(n,Object(E["a"])(r.map((function(e){return{text:e.department,value:e.department}}))))})),H().then((function(t){var n,r=t.data;(n=e.subsemesterOptions).push.apply(n,Object(E["a"])(r.map((function(t){t.date_start=new Date(t.date_start),t.date_end=new Date(t.date_end),t.date_start_display=e.readableDate(t.date_start),t.date_end_display=e.readableDate(t.date_end);var n="".concat(t.date_start_display," - ").concat(t.date_end_display);return{text:n,value:t}}))))}))},methods:{readableDate:function(e){return"".concat(e.getMonth()+1,"/").concat(e.getDate())},_getCourseIdentifier:function(e){return"".concat(e.department).concat(e.level).concat(e.date_start.getMonth()+1).concat(e.date_start.getDay()+1).concat(e.date_start.getFullYear()).concat(e.date_end.getMonth()+1).concat(e.date_end.getDay()+1).concat(e.date_end.getFullYear())},addCourse:function(e){e.selected=!0,this.$set(this.selectedCourses,this._getCourseIdentifier(e),e)},removeCourse:function(e){this.$delete(this.selectedCourses,this._getCourseIdentifier(e)),e.selected=!1}},computed:{filteredCourses:function(){var e=this;return this.courses.filter((function(t){var n=t.date_start,r=t.date_end,s=t.department,a=t.str;return(!e.selectedSubsemester||e.selectedSubsemester.date_start.getTime()===n.getTime()&&e.selectedSubsemester.date_end.getTime()===r.getTime())&&(!e.selectedDepartment||e.selectedDepartment===s)&&(!e.textSearch||a.includes(e.textSearch.toUpperCase()))}))}}},ee=Z,te=(n("35c7"),Object(h["a"])(ee,D,T,!1,null,"0fe092c6",null)),ne=te.exports,re=new v["a"]({routes:[{path:"/",component:ne,name:"Schedule"},{path:"/Admin",component:k,name:"Admin"}],mode:"history"}),se=re;r["default"].config.productionTip=!1,r["default"].use(v["a"]),new r["default"]({render:function(e){return e(_)},router:se}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),s=n.n(r);s.a},"7e7a":function(e,t,n){},8146:function(e,t,n){},9481:function(e,t,n){"use strict";var r=n("7e7a"),s=n.n(r);s.a},"9c0c":function(e,t,n){}});